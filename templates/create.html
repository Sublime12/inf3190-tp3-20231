{% macro error_component(name) %}
    {% if errors[name] and errors[name]['is_valid'] != 0 %}
        {% set messages = errors[name]['messages'] %}
        <div class="server-error-validation-{{ name }}">
        {% for message in messages %}
            <div class="text-sm text-red-600">
                {{ message }}
            </div>
        {% endfor %}
        </div>
    {% endif %}
{% endmacro %}

{% macro input_component(name, label) %}
    <div class="flex flex-col" x-data="{ {{ name }}: `{{ errors[name]['value'] if errors and errors[name] else '' }}`}">
        <label for="{{ name }}">{{ label }}</label>
        <input 
            x-model="{{ name }}" 
            id="{{ name }}" 
            name="{{ name }}" 
            type="text"
        >
        {% if errors %}
            {{ error_component(name) }}
        {% endif %}
    </div>
{% endmacro %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/app.css">
</head>
<body>
    <div class="flex justify-center">
        <div class="max-w-6xl w-full p-8">
            <form 
                action="{{ url_for('store') }}" 
                method="post"
                class="space-y-5"
            >
                {{ input_component('nom', 'Nom') }}
                {{ input_component('espece', 'Espece') }}
                {{ input_component('race', 'Race') }}
                {{ input_component('age', 'Age') }}
                {{ input_component('description', 'Description') }}
                {{ input_component('courriel', 'Courriel') }}
                {{ input_component('adresse', 'Adresse') }}
                {{ input_component('ville', 'Ville') }}
                {{ input_component('cp', 'Code postal') }}

                <div>
                    <button 
                        class="text-gray-50 py-3 px-4 border-sky-600 border-2 bg-sky-600 hover:text-sky-600 hover:bg-gray-50 hover:font-semibold transition duration-100 ease-in-out"
                    >
                        Envoyer
                    </button>
                </div>
            </form>
        </div>
    </div>
    <script>
        
    </script>
    <script src="/js/app.js"></script>
</body>
</html>